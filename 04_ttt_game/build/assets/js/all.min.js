const game=document.body.querySelector(".ttt-game"),grid={},icons={x:game.querySelector("#icon-x"),o:game.querySelector("#icon-o")},scores={x:{aheadIcon:game.querySelector("#player-icon--ahead"),behindIcon:game.querySelector("#player-icon--behind"),el:game.querySelector("#score-x"),score:0},o:{el:game.querySelector("#score-o"),score:0}},players=["x","o"];for(let l=1;l<=3;l++)for(let e=1;e<=3;e++){const c=game.querySelector(`.ttt-row:nth-child(${l}) .ttt-cell:nth-child(${e})`);c.dataset.x=e,c.dataset.y=l,c.addEventListener("click",cellClickEvent),grid[l]=grid[l]||{},grid[l][e]={x:e,y:l,el:c,value:""}}function cellClickEvent(e){var l,e=grid[e.target.dataset.y][e.target.dataset.x];e.value||(fillCell(e,"o"),{winner:e,empty:l}=check(),console.log("winner",e))}function fillCell(e,l){e.value=l,e.el.appendChild(icons[l].cloneNode(!0))}function check(e){var o=[],r={player:null,cells:[]};for(const y of["y","x"]){var c={o:[],x:[]};for(let l=1;l<=3;l++){var t=l,n="y"===y?t:4-t,t=grid[t][n],a=(t.value&&c[t.value].push(t),{o:[],x:[]});for(let e=1;e<=3;e++){var i="y"===y?l:e,s="y"===y?e:l,i=grid[i][s];(i.value?a[i.value]:o).push(i)}checkLine(a,r)}checkLine(c,r)}return e||(r.player?(scores[r.player].score++,console.log("reset")):o.length||console.log("reset")),{winner:r.player,empty:[...new Set(o)]}}function checkLine(e,l){for(const o of players)3===e[o].length&&(l.player=o,l.cells.push(...e[o]),console.log("complete",l))}